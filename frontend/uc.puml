@startuml Mini-12306用例图

skinparam packageStyle rectangle
skinparam actorStyle awesome

' 定义角色
actor 旅客 as User
actor 系统 as System

' 定义用例
rectangle "Mini-12306系统" {
    usecase "用户注册" as UC1
    usecase "查询车次" as UC2
    usecase "购票" as UC3
}

' 定义关系
User --> UC1
User --> UC2
User --> UC3

@enduml

用例规约描述

@startuml 用户注册用例规约
title 用户注册用例规约

== 用例名称 ==
用户注册

== 主要参与者 ==
旅客

== 前置条件 ==
旅客未注册账号

== 后置条件 ==
系统创建新用户账号

== 主成功场景 ==
1. 旅客进入注册页面
2. 旅客填写注册信息（用户名、密码、身份证号、手机号、银行卡号）
3. 旅客提交注册信息
4. 系统验证注册信息
5. 系统创建新用户账号
6. 系统显示注册成功提示

== 扩展场景 ==
3a. 注册信息不完整
    1. 系统提示必填项
    2. 返回步骤2

4a. 手机号已被注册
    1. 系统提示手机号已被使用
    2. 返回步骤2

4b. 身份证号已被注册
    1. 系统提示身份证号已被使用
    2. 返回步骤2

4c. 银行卡号无效
    1. 系统提示银行卡号无效
    2. 返回步骤2

== 特殊需求 ==
1. 密码必须包含字母和数字，长度至少8位
2. 手机号必须是11位有效号码
3. 身份证号必须是18位有效号码
4. 银行卡号必须是16-19位有效号码

@enduml

@startuml 查询车次用例规约
title 查询车次用例规约

== 用例名称 ==
查询车次

== 主要参与者 ==
旅客

== 前置条件 ==
无

== 后置条件 ==
系统显示符合条件的车次信息

== 主成功场景 ==
1. 旅客进入查询页面
2. 旅客选择查询方式（路线查询/车次查询）
3a. 路线查询：
    1. 旅客选择乘车日期
    2. 旅客输入出发站和到达站
    3. 旅客点击查询按钮
    4. 系统显示符合条件的车次列表

3b. 车次查询：
    1. 旅客输入车次号或车票ID
    2. 旅客点击查询按钮
    3. 系统显示指定车次信息

== 扩展场景 ==
2a. 日期未选择
    1. 系统提示请选择日期
    2. 返回步骤2

2b. 站点未填写
    1. 系统提示请填写站点信息
    2. 返回步骤2

2c. 车次号/车票ID未填写
    1. 系统提示请填写查询信息
    2. 返回步骤2

4a. 未找到符合条件的车次
    1. 系统提示未找到相关车次
    2. 返回步骤2

== 特殊需求 ==
1. 日期选择范围：当前日期至30天内
2. 车次列表显示：车次号、出发时间、到达时间、历时、票价、余票数
3. 支持模糊查询站点名称

@enduml

@startuml 购票用例规约
title 购票用例规约

== 用例名称 ==
购票

== 主要参与者 ==
旅客

== 前置条件 ==
1. 旅客已登录系统
2. 旅客已查询到目标车次
3. 目标车次有余票

== 后置条件 ==
系统生成车票，完成购票流程

== 主成功场景 ==
1. 旅客选择目标车次
2. 旅客选择乘车人信息
3. 旅客选择座位类型
4. 旅客确认订单信息
5. 旅客选择支付方式
6. 系统处理支付
7. 系统生成车票
8. 系统发送购票成功通知

== 扩展场景 ==
2a. 乘车人信息不完整
    1. 系统提示完善乘车人信息
    2. 返回步骤2

3a. 所选座位类型无余票
    1. 系统提示座位已售罄
    2. 返回步骤3

5a. 支付失败
    1. 系统提示支付失败
    2. 返回步骤5

== 特殊需求 ==
1. 同一车次同一乘车人只能购买一张车票
2. 支付超时时间为15分钟
3. 支持多种支付方式（银行卡、支付宝、微信）
4. 购票成功后自动发送短信通知
5. 支持在线选座（如果该车次支持）

@enduml
